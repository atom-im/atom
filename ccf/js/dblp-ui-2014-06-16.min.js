if (!window.dblp) {
    throw ("dblp-ui.js: dblp.js has not been loaded.")
}
dblp.ui = dblp.ui || {}; (function(a, b) {
    a.initScrollBars = function() {
        $("body.js").css("overflow-y", "scroll")
    };
    a.initHideables = function() {
        $(".hideable").each(function() {
            var c = $(this).find(".hide-head").attr("id");
            if (!c) {
                c = $(this).find(".hide-head").parent().attr("id")
            }
            $(this).find(".hide-head").prepend('<a href="#" class="toggle show">[+]</a><a href="#" class="toggle hide">[&ndash;]</a>&nbsp;');
            $(this).find(".show").hide();
            $(this).find(".hide").show();
            if ($(this).hasClass("hidden") || $(this).find(".hide-body").hasClass("hidden")) {
                $(this).find(".show").show();
                $(this).find(".hide").hide();
                $(this).find(".hide-body").hide()
            }
            if ($.cookie("dblp-hideable-show-" + c) == "true") {
                console.debug('expanding section "' + c + '" as stored in cookie');
                $(this).find(".show").hide();
                $(this).find(".hide").show();
                $(this).find(".hide-body").show()
            } else {
                if ($.cookie("dblp-hideable-hide-" + c) == "true") {
                    console.debug('collapsing section "' + c + '" as stored in cookie');
                    $(this).find(".show").show();
                    $(this).find(".hide").hide();
                    $(this).find(".hide-body").hide()
                } else {
                    if ($.cookie("dblp-hideable-showall") == "true") {
                        $(this).find(".show").hide();
                        $(this).find(".hide").show();
                        $(this).find(".hide-body").show()
                    } else {
                        if ($.cookie("dblp-hideable-hideall") == "true") {
                            $(this).find(".show").show();
                            $(this).find(".hide").hide();
                            $(this).find(".hide-body").hide()
                        }
                    }
                }
            }
            if (c == "homonyms" && $("#publ-section").length == 0) {
                console.debug("expanding homonym section since this is a disambiguation page");
                $(this).find(".show").hide();
                $(this).find(".hide").show();
                $(this).find(".hide-body").show()
            }
            $(this).find(".show").click(function() {
                console.debug('expanding section "' + c + '" on click');
                $(this).parent().find(".show").hide();
                $(this).parent().find(".hide").show();
                $(this).parent().parent().find(".hide-body").show("slow");
                $.removeCookie("dblp-hideable-hide-" + c, {
                    path: dblp.COOKIE_PATH
                });
                $.cookie("dblp-hideable-show-" + c, true, {
                    path: dblp.COOKIE_PATH,
                    expires: dblp.COOKIE_EXPIRES_IN_DAYS
                });
                return false
            });
            $(this).find(".hide").click(function() {
                console.debug('collapsing section "' + c + '" on click');
                $(this).parent().find(".show").show();
                $(this).parent().find(".hide").hide();
                $(this).parent().parent().find(".hide-body").hide("slow");
                $.removeCookie("dblp-hideable-show-" + c, {
                    path: dblp.COOKIE_PATH
                });
                $.cookie("dblp-hideable-hide-" + c, true, {
                    path: dblp.COOKIE_PATH,
                    expires: dblp.COOKIE_EXPIRES_IN_DAYS
                });
                return false
            })
        });
        $("#headline").each(function() {
            if ($(".hideable").length == 0) {
                return
            }
            $(this).prepend('<ul class="hide-control"><li title="expand all"><a href="#" class="show-all"><span class="generic-thin-icon">[+]</span></a></li><li title="collapse all"><a href="#" class="hide-all"><span class="generic-thin-icon">[&ndash;]</span></a></li></ul>');
            $(this).find(".show-all").click(function() {
                console.debug("expanding all sections on click");
                $(document).find(".hide-head").find(".show").hide();
                $(document).find(".hide-head").find(".hide").show();
                $(document).find(".hide-body").show(1000);
                cookieList = document.cookie.split(";");
                for (var c = 0; c < cookieList.length; c++) {
                    var d = jQuery.trim(cookieList[c]).split("=")[0];
                    if ((/^dblp-hideable-/).test(d)) {
                        $.removeCookie(d, {
                            path: dblp.COOKIE_PATH
                        })
                    }
                }
                $.cookie("dblp-hideable-showall", true, {
                    path: dblp.COOKIE_PATH,
                    expires: dblp.COOKIE_EXPIRES_IN_DAYS
                });
                return false
            });
            $(this).find(".hide-all").click(function() {
                console.debug("collapsing all sections on click");
                $(document).find(".hide-head").find(".show").show();
                $(document).find(".hide-head").find(".hide").hide();
                $(document).find(".hide-body").hide(1000);
                cookieList = document.cookie.split(";");
                for (var c = 0; c < cookieList.length; c++) {
                    var d = jQuery.trim(cookieList[c]).split("=")[0];
                    if ((/^dblp-hideable-/).test(d)) {
                        $.removeCookie(d, {
                            path: dblp.COOKIE_PATH
                        })
                    }
                }
                $.cookie("dblp-hideable-hideall", true, {
                    path: dblp.COOKIE_PATH,
                    expires: dblp.COOKIE_EXPIRES_IN_DAYS
                });
                return false
            })
        });
        $(".side").find("a").click(function() {
            var c = $(this).attr("href");
            if (c != "#" && c != "#footer") {
                $(document).find(c).find(".show").hide();
                $(document).find(c).find(".hide").show();
                $(document).find(c).parent().find(".hide-body").show("slow");
                var d = $(document).find(c).attr("id");
                $.removeCookie("dblp-hideable-hide-" + d, {
                    path: dblp.COOKIE_PATH
                });
                $.cookie("dblp-hideable-show-" + d, true, {
                    path: dblp.COOKIE_PATH,
                    expires: dblp.COOKIE_EXPIRES_IN_DAYS
                })
            }
            return true
        })
    };
    a.initExpandables = function() {
        $(".expandable").each(function() {
            var d = $(this).prev("dt");
            var f = d.text().substring(0, 4);
            var h = d.attr("id");
            var e = $(this).find(".expand-head");
            var c = $(this).find(".expand-body");
            e.show();
            c.hide();
            c.after('<div class="expand-control"><p class="toggle show"><a href="' + dblp.BASE_URL + "/news/" + f + "#" + h + '">show more</a></p><p class="toggle hide"><a href="' + dblp.BASE_URL + "/news/" + f + "#" + h + '">show less</a></p></div>');
            var g = $(this).find(".expand-control");
            g.find(".show").show();
            g.find(".hide").hide();
            g.css("font-style", "italic");
            g.css("font-size", "small");
            g.click(function() {
                c.toggle();
                g.find(".toggle").toggle();
                return false
            })
        })
    };
    a.initTextSelect = function() {
        $(".select-on-click").click(function() {
            var c = $(this).getSelectionText();
            if (!c || c.length == 0) {
                $(this).selectText()
            }
        });
        if (!$(".select-on-click").prop("title")) {
            $(".select-on-click").prop("title", "click to select text")
        }
    };
    a.initBanner = function() {
        $("#banner").each(function() {
            $(this).find(".message").each(function() {
                if ($(this).hasClass("permanent")) {
                    $(this).show();
                    return
                }
                var d = $(this).attr("data-version");
                if (!d) {
                    return
                }
                if ($.cookie("dblp-banner-hide-" + d) != "true") {
                    $(this).show("slow");
                    $(this).append('<div class="dismiss"><img alt="" title="dismiss" src="' + dblp.BASE_URL + '/images/clear-mark.big.16x16.png" /></div>');
                    var c = $(this).find(".dismiss");
                    c.css("position", "absolute");
                    c.css("top", "4px");
                    c.css("right", "10px");
                    c.css("cursor", "pointer");
                    c.click(function() {
                        $.cookie("dblp-banner-hide-" + d, true, {
                            path: dblp.COOKIE_PATH,
                            expires: dblp.COOKIE_EXPIRES_IN_DAYS
                        });
                        $(this).parent().hide("slow")
                    })
                }
            })
        })
    };
    a.init = function() {
        console.debug("start initializing UI element functions");
        a.initScrollBars();
        a.initHideables();
        a.initExpandables();
        a.initTextSelect();
        a.initBanner();
        console.info("done initializing UI element functions")
    }
})(dblp.ui);
$(document).ready(dblp.ui.init());